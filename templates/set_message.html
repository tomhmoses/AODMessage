{% extends "structure.html" %}
{% block url %}https://home.tmoses.co.uk/setmessage{% endblock %}
{% block title %}Set Message{% endblock %}
{% block description %}set a message for my always on display!{% endblock %}
{% block image_url %}https://i.imgur.com/4lStfmU.jpg{% endblock %}

{% block page_content %}
    {% if done %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <strong>Done! </strong> That is now on my screen!
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
        </div>
    {% endif %}
<h1>Set Message</h1>
    <form action="setMessage" method="POST">
        <div class="form-group">
            <label for="name">Your Name:</label>
            <input class="form-control" id="name" name="name" type="text" placeholder="Will?">
        </div>
        <div class="form-group">
            <label for="message">Message:</label>
            <input class="form-control" id="message" name="message" type="text" placeholder="a message that should show up!">
        </div>
        <button type="submit" class="btn btn-success btn-lg btn-block">
        Submit
        </button>
    </form>
    <p><strong>{{ visits }}</strong> visits so far...</p>
    <h1>
        Current Message
    </h1>
    <p>{{ message }}</p>
    <h1>
        Message History
    </h1>
  {% for entry in history %}
          <a class="list-group-item list-group-item-action flex-column align-items-start">
            <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">{{ entry["name"] }}</h5>
                <small class="text-muted">{{ entry["datetime"] }}</small>
            </div>
            <p class="mb-1">{{ entry["message"] }}</p>
        </a>
  {% else %}
    <li><em>Unbelievable.  No entries here so far</em>
  {% endfor %}
{% endblock %}
